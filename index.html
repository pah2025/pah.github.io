<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PAH Interactive Visualizer</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style> 
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f7f9fc;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #333;
    }

    h1 {
      margin-bottom: 10px;
    }

    #prototype-container {
      border-radius: 15px;
      background: white;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 15px;
      width: 700px;
      max-width: 95%;
    }

    svg {
      width: 100%;
      height: 400px;
    }

    .prototype {
      cursor: pointer;
    }

    .info-box {
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      background: #eef4ff;
    }

    .task-btn {
      margin-top: 15px;
      padding: 8px 12px;
      border-radius: 5px;
      border: none;
      background-color: #4a90e2;
      color: white;
      cursor: pointer;
    }

    .task-btn:hover {
      background-color: #357ab8;
    }
  </style>
</head>
<body>

<h1>PAH Interactive Prototype Visualizer</h1>

<div id="prototype-container">
  <svg></svg>
  <button class="task-btn">Train Next Task</button>
  <div class="info-box">Click on a prototype to see task-specific classifier details.</div>
</div>

<script>
  const width = 700;
  const height = 400;

  const svg = d3.select("svg")
    .attr("viewBox", [0, 0, width, height]);

  let currentTask = 0;

  const prototypes = [
    [[100, 200], [200, 300], [300, 200]],
    [[120, 220], [220, 320], [320, 220]],
    [[140, 240], [240, 340], [340, 240]],
    [[160, 260], [260, 360], [360, 260]]
  ];

  function render(taskIndex) {
    const data = prototypes[taskIndex % prototypes.length];

    const colors = d3.scaleOrdinal(d3.schemeCategory10);

    const protos = svg.selectAll("circle")
      .data(data);

    protos.enter().append("circle")
      .attr("class", "prototype")
      .attr("cx", d => d[0])
      .attr("cy", d => d[1])
      .attr("r", 0)
      .attr("fill", (_, i) => colors(i))
      .on("click", (_, i) => d3.select('.info-box').text(`Task ${taskIndex + 1}: Classifier generated by Prototype ${i + 1}`))
      .transition().duration(600)
      .attr("r", 15);

    protos.transition().duration(600)
      .attr("cx", d => d[0])
      .attr("cy", d => d[1])
      .attr("fill", (_, i) => colors(i));

    protos.exit().transition().duration(600)
      .attr("r", 0)
      .remove();
  }

  d3.select(".task-btn").on("click", () => {
    currentTask++;
    render(currentTask);
    d3.select('.info-box').text(`Trained Task ${currentTask + 1}. Click on a prototype for details.`);
  });

  render(currentTask);
</script>

</body>
</html>
